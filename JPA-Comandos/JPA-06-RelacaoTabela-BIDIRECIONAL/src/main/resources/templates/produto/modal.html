<div th:if="${editar}" style="
        position:fixed;
        top:0;
        left:0;
        width:100%;
        height:100%;
        background:rgba(0,0,0,0.5);
        display:flex;
        align-items:center;
        justify-content:center;
        z-index:1000;
     ">
	<div style="
        background:#fff;
        padding:20px;
        width:600px;
        max-width:95%;
        border-radius:8px;
    ">

		<h3 th:text="'Editar Produto'"></h3>

		<form th:action="@{/produtos/editar}" th:object="${produto}" method="post" enctype="multipart/form-data">

			<input type="hidden" th:field="*{id}" />

			<div>
				<label>Nome</label>
				<input type="text" th:field="*{nome}" />
			</div>

			<div>
				<label>Preço</label>
				<input type="number" step="0.01" th:field="*{preco}" />
			</div>

			<div>
				<label>Imagem</label>
				<!-- mantém a imagem antiga -->
				<input type="hidden" th:field="*{imagem}">
				<!-- mantém a imagem atual -->
				<input type="file" name="arquivo">
			</div>

			<div>
				<label>Categoria</label>
				<select th:field="*{categoriaId}">
					<option value="">Selecione</option>
					<option th:each="c : ${categorias}" th:value="${c.id}" th:text="${c.nome}">
					</option>
				</select>
			</div>

			<div>
				<label>Fornecedor</label>
				<select th:field="*{fornecedorId}">
					<option value="">Selecione</option>
					<option th:each="f : ${fornecedores}" th:value="${f.id}" th:text="${f.nome}">
					</option>
				</select>
			</div>

			<!-- imagem atual -->
			<div th:if="${produto.imagem != null}">
				<p>Imagem atual:</p>
				<img th:src="@{/imagens/{img}(img=${produto.imagem})}" width="100">
			</div>

			<br>

			<button type="submit">Salvar</button>
			<a th:href="@{/produtos}">Cancelar</a>

		</form>
	</div>
</div>